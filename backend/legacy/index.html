<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나그네 - GPS 기반 맛집 숏폼 플랫폼</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="config.js"></script>
    <script>
        // config.js 로드 후 Google Maps API 동적 로드
        function loadGoogleMapsAPI() {
            if (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_MAPS.API_KEY !== 'YOUR_API_KEY_HERE') {
                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=${CONFIG.GOOGLE_MAPS.API_KEY}&libraries=${CONFIG.GOOGLE_MAPS.LIBRARIES.join(',')}`;
                script.onload = function() {
                    console.log('Google Maps API 로드 완료');
                    // API 로드 완료 후 초기화 함수 호출
                    if (window.initializeGoogleMaps) {
                        window.initializeGoogleMaps();
                    }
                };
                script.onerror = function() {
                    console.error('Google Maps API 로드 실패');
                };
                document.head.appendChild(script);
            } else {
                console.warn('Google Maps API 키가 설정되지 않았습니다.');
            }
        }
        
        // DOM 로드 완료 후 API 로드
        document.addEventListener('DOMContentLoaded', loadGoogleMapsAPI);
    </script>
</head>
<body>
    <!-- 로딩 화면 -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">프리토타입</div>
            <div class="loading-spinner"></div>
            <div class="loading-text">로딩 중...</div>
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <div id="main-container" class="main-container hidden">
        <!-- 숏폼 영상 섹션 -->
        <div id="video-section" class="video-section">
            <!-- GPS 권한 요청 알림 -->
            <div id="gps-permission" class="gps-permission">
                <button class="close-permission-btn" id="close-gps-permission">×</button>
                <div class="permission-content">
                    <div class="permission-icon">📍</div>
                    <h3>위치 정보가 필요합니다</h3>
                    <p>근처 맛집을 찾기 위해 GPS 접근을 허용해주세요</p>
                    <button id="enable-gps" class="permission-btn">GPS 활성화</button>
                </div>
            </div>
            
            <div class="video-container">
                <!-- YouTube Shorts iframe -->
                <iframe 
                    id="youtube-video" 
                    class="short-video youtube-video"
                    src=""
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
                
                <!-- 로컬 비디오 (백업용) -->
                <video id="local-video" class="short-video local-video" loop style="display: none;">
                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                    브라우저가 비디오를 지원하지 않습니다.
                </video>
                <div class="video-overlay">
                    <div class="video-controls">
                        <button class="control-btn play-btn" id="play-btn">▶</button>
                        <!-- <button class="control-btn pause-btn" id="pause-btn">⏸</button> -->
                    </div>
                                <div class="video-info">
                <h3 id="restaurant-name">다가 생구이 서울본점</h3>
                <p id="restaurant-desc">폭탄계란찜으로 완성하는 한 끼</p>
                <div class="distance-info">
                    <span id="distance-text">거리: 계산 중...</span>
                </div>
            </div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" id="reservation-btn">예약하기</button>
                <button class="action-btn" id="find-btn">찾아가기</button>
            </div>
        </div>

        <!-- 오른쪽 화면 (예약/찾아가기) -->
        <div id="right-section" class="right-section hidden">
            <div class="section-header">
                <button class="back-btn" id="back-btn">← 뒤로</button>
                <h2 id="section-title">예약하기</h2>
            </div>
            
            <!-- 예약 섹션 -->
            <div id="reservation-content" class="content-section">
                <div class="restaurant-info">
                    <h3 id="reservation-restaurant-name">맛집 이름</h3>
                    <p id="reservation-restaurant-address">주소 정보</p>
                    <div class="restaurant-rating">
                        <span class="stars">⭐⭐⭐⭐⭐</span>
                        <span class="rating-text">4.8/5.0</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="name">이름</label>
                    <input type="text" id="name" placeholder="이름을 입력하세요">
                </div>
                <div class="form-group">
                    <label for="phone">전화번호</label>
                    <input type="tel" id="phone" placeholder="전화번호를 입력하세요">
                </div>
                <div class="form-group">
                    <label for="date">방문 날짜</label>
                    <input type="date" id="date">
                </div>
                <div class="form-group">
                    <label for="time">방문 시간</label>
                    <input type="time" id="time">
                </div>
                <div class="form-group">
                    <label for="guests">방문 인원</label>
                    <input type="number" id="guests" placeholder="인원 수" min="1" max="10">
                </div>
                <button class="submit-btn" id="submit-reservation">예약 완료</button>
            </div>

            <!-- 찾아가기 섹션 -->
            <div id="find-content" class="content-section hidden">
                <div class="restaurant-detail">
                    <h3 id="find-restaurant-name">맛집 이름</h3>
                    <p id="find-restaurant-address">주소 정보</p>
                    <div class="restaurant-stats">
                        <div class="stat-item">
                            <span class="stat-icon">⭐</span>
                            <span class="stat-value">4.8</span>
                            <span class="stat-label">평점</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">📍</span>
                            <span class="stat-value" id="current-distance">0m</span>
                            <span class="stat-label">거리</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">💰</span>
                            <span class="stat-item">2만원</span>
                            <span class="stat-label">예상비용</span>
                        </div>
                    </div>
                </div>
                
                <div class="map-container">
                    <div id="map" class="map"></div>
                    <div class="map-info">
                        <p class="map-coordinates" id="current-coordinates">GPS 위치 확인 중...</p>
                    </div>
                </div>
                
                <div class="navigation-options">
                    <button class="nav-btn" id="walk-btn">🚶 도보</button>
                    <button class="nav-btn" id="car-btn">🚗 자동차</button>
                    <button class="nav-btn" id="transit-btn">🚇 대중교통</button>
                </div>
                
                <div class="location-info">
                    <h3>📍 현재 위치</h3>
                    <p id="current-location-text">GPS 위치 확인 중...</p>
                    <div class="location-details">
                        <div class="detail-item">
                            <span class="detail-label">현재 위치:</span>
                            <span class="detail-value" id="current-address">확인 중...</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">예상 소요시간:</span>
                            <span class="detail-value" id="estimated-time">계산 중...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
